import type { DeepPartial, ExternalEventEmitter } from '../common/index.js';
import { Arrayable } from '../common/index.js';
import { ErrorSeverity } from '../source/index.js';
import type { Project } from './Project.js';
export interface Config {
    /**
     * Environment settings. Unlike other configs, all involved root folders must have the same `env` settings. It is undocumented
     * what would happen if two roots have conflicting `env` settings.
     */
    env: EnvConfig;
    /**
     * Formatter rules.
     */
    format: FormatterConfig;
    /**
     * t Linter rules.
     */
    lint: LinterConfig;
    /**
     * Code snippets.
     */
    snippet: SnippetsConfig;
}
export interface CustomResourceConfig {
    /**
     * The entry you have dispatched from mcdoc. (eg. `picoblaze:game_event`)
     */
    category: string;
    /**
     * The file extension name of the dispatched resource. Only `.json` is supported for now.
     */
    ext?: '.json';
    /**
     * The pack type of the dispatched resource. Only `data` is supported for now.
     */
    pack?: 'data';
    /**
     * The first minecraft version the dispatched resource is available in.
     */
    since?: `${bigint}.${bigint}.${bigint}` | `${bigint}.${bigint}`;
    /**
     * The first minecraft version the dispatched resource is no longer available in.
     */
    until?: `${bigint}.${bigint}.${bigint}` | `${bigint}.${bigint}`;
}
export interface EnvConfig {
    /**
     * A list of data packs the current project depends on. Each value in this array can be either an absolute file path
     * to a data pack folder or data pack archive (e.g. `.zip` or `.tar.gz`), or a special string like `@vanilla-mcdoc`.
     */
    dependencies: string[];
    /**
     * A list of file patterns to exclude.
     */
    exclude: string[];
    /**
     * **Experimental feature, breaking changes could occur.**
     *
     * Track changes at [issue #1254](https://github.com/SpyglassMC/Spyglass/issues/1254).
     *
     * Custom resources, currently only works for `minecraft:resource` JSON definitions dispatched from mcdoc.
     */
    customResources: {
        [path: string]: CustomResourceConfig;
    };
    feature: {
        codeActions: boolean;
        colors: boolean;
        completions: boolean;
        documentHighlighting: boolean;
        documentLinks: boolean;
        foldingRanges: boolean;
        formatting: boolean;
        hover: boolean;
        inlayHint: boolean | {
            enabledNodes: string[];
        };
        semanticColoring: boolean | {
            disabledLanguages?: string[];
        };
        selectionRanges: boolean;
        signatures: boolean;
    };
    /**
     * This field is case-insensitive.
     *
     * - `Auto`: Auto infer from `pack.mcmeta`.
     * - `Latest release`
     * - `Latest snapshot`
     * - A version identifier or name found in [mcmeta's version data](https://github.com/misode/mcmeta/blob/summary/versions/data.json) that is older than `1.15` (inclusive).
     */
    gameVersion: string;
    /**
     * Use custom files as mcmeta summaries.
     *
     * // TODO: Support file paths relative to the project root.
     */
    mcmetaSummaryOverrides: Partial<Record<'blocks' | 'commands' | 'fluids' | 'registries', {
        path: string;
        replace?: boolean;
    }>>;
    permissionLevel: 1 | 2 | 3 | 4;
    plugins: string[];
    /**
     * Whether to enable caching of mcdoc simplified types.
     *
     * May become corrupt after changing game versions, so this is currently disabled by default.
     */
    enableMcdocCaching: boolean;
}
export type LinterSeverity = 'hint' | 'information' | 'warning' | 'error';
export declare namespace LinterSeverity {
    function is(value: unknown): value is LinterSeverity;
    function toErrorSeverity(value: LinterSeverity): ErrorSeverity;
}
type BracketSpacingConfig = any;
type SepSpacingConfig = any;
export type QuoteConfig = {
    always?: boolean;
    avoidEscape?: boolean | null;
    type?: 'double' | 'single';
};
type LinterConfigValue<T> = T extends boolean ? null | T | [LinterSeverity, T] | LinterSeverity : null | T | [LinterSeverity, T];
export declare namespace LinterConfigValue {
    function destruct(value: LinterConfigValue<boolean | string | number | object>): {
        ruleSeverity: ErrorSeverity;
        ruleValue: boolean | string | number | object;
    } | undefined;
}
export interface FormatterConfig {
    blockStateBracketSpacing: BracketSpacingConfig;
    blockStateCommaSpacing: SepSpacingConfig;
    blockStateEqualSpacing: SepSpacingConfig;
    blockStateTrailingComma: boolean;
    eol: 'auto' | 'CRLF' | 'LF';
    nbtArrayBracketSpacing: BracketSpacingConfig;
    nbtArrayCommaSpacing: SepSpacingConfig;
    nbtArraySemicolonSpacing: {
        after: number;
    };
    nbtArrayTrailingComma: boolean;
    nbtByteSuffix: 'b' | 'B';
    nbtCompoundBracketSpacing: BracketSpacingConfig;
    nbtCompoundColonSpacing: SepSpacingConfig;
    nbtCompoundCommaSpacing: SepSpacingConfig;
    nbtCompoundTrailingComma: boolean;
    nbtDoubleOmitSuffix: boolean;
    nbtDoubleSuffix: 'd' | 'D';
    nbtFloatSuffix: 'f' | 'F';
    nbtListBracketSpacing: BracketSpacingConfig;
    nbtListCommaSpacing: SepSpacingConfig;
    nbtListTrailingComma: boolean;
    nbtLongSuffix: 'l' | 'L';
    nbtShortSuffix: 's' | 'S';
    selectorBracketSpacing: BracketSpacingConfig;
    selectorCommaSpacing: SepSpacingConfig;
    selectorEqualSpacing: SepSpacingConfig;
    selectorTrailingComma: boolean;
    timeOmitTickUnit: boolean;
}
export interface LinterConfig {
    blockStateSortKeys: LinterConfigValue<'alphabetically'>;
    nbtCompoundSortKeys: LinterConfigValue<'alphabetically'>;
    selectorSortKeys: LinterConfigValue<string[]>;
    commandStringQuote: LinterConfigValue<QuoteConfig>;
    nbtKeyQuote: LinterConfigValue<QuoteConfig>;
    nbtPathQuote: LinterConfigValue<QuoteConfig>;
    nbtStringQuote: LinterConfigValue<QuoteConfig>;
    selectorKeyQuote: LinterConfigValue<QuoteConfig>;
    idOmitDefaultNamespace: LinterConfigValue<boolean>;
    nameOfNbtKey: LinterConfigValue<string>;
    nameOfObjective: LinterConfigValue<string>;
    nameOfScoreHolder: LinterConfigValue<string>;
    nameOfTag: LinterConfigValue<string>;
    nameOfTeam: LinterConfigValue<string>;
    nbtArrayLengthCheck: LinterConfigValue<boolean>;
    nbtBoolean: LinterConfigValue<boolean>;
    nbtListLengthCheck: LinterConfigValue<boolean>;
    nbtTypeCheck: LinterConfigValue<'strictly' | 'loosely'>;
    undeclaredSymbol: LinterConfigValue<SymbolLinterConfig>;
}
export interface SnippetsConfig {
    [label: string]: string;
}
export type SymbolLinterConfig = Arrayable<SymbolLinterConfig.Complex> | SymbolLinterConfig.Action;
export declare namespace SymbolLinterConfig {
    function is(value: unknown): value is SymbolLinterConfig;
    interface Complex {
        /**
         * {@link Condition}s in this array are connected with OR.
         */
        if?: Arrayable<Condition>;
        then?: Action;
        override?: Arrayable<Complex>;
    }
    namespace Complex {
        function is(v: unknown): v is Complex;
    }
    interface Condition {
        category?: Arrayable<string>;
        pattern?: Arrayable<string>;
        excludePattern?: Arrayable<string>;
        namespace?: Arrayable<string>;
        excludeNamespace?: Arrayable<string>;
    }
    namespace Condition {
        function is(v: unknown): v is Condition;
    }
    interface DeclareAction {
        declare: 'block' | 'file' | 'public';
    }
    interface ReportAction {
        report: LinterSeverity | 'inherit';
    }
    type Action = DeclareAction | ReportAction;
    namespace Action {
        function isDeclare(value: Action | undefined): value is DeclareAction;
        function isReport(value: Action | undefined): value is ReportAction;
        function is(v: unknown): v is Action;
    }
}
/**
 * Config which simulates the default vanilla command system.
 */
export declare const VanillaConfig: Config;
export type PartialConfig = DeepPartial<Config>;
export declare namespace PartialConfig {
    /**
     * Filters a config for valid editor settings
     * @param spyglassmcConfiguration An unchecked config, should have the same layout as {@link PartialConfig}
     * @returns The config, only keeping editor settings that have valid values
     */
    function buildConfigFromEditorSettingsSafe(spyglassmcConfiguration: any): PartialConfig;
}
type ConfigEvent = {
    config: Config;
};
type ErrorEvent = {
    error: unknown;
    uri: string;
};
export declare class ConfigService implements ExternalEventEmitter {
    #private;
    private readonly project;
    private readonly defaultConfig;
    static readonly ConfigFileNames: readonly ["spyglass.json", ".spyglassrc", ".spyglassrc.json"];
    private currentEditorConfiguration;
    constructor(project: Project, defaultConfig?: Config);
    on(event: 'changed', callbackFn: (data: ConfigEvent) => void): this;
    on(event: 'error', callbackFn: (data: ErrorEvent) => void): this;
    once(event: 'changed', callbackFn: (data: ConfigEvent) => void): this;
    once(event: 'error', callbackFn: (data: ErrorEvent) => void): this;
    emit(event: 'changed', data: ConfigEvent): boolean;
    emit(event: 'error', data: ErrorEvent): boolean;
    onEditorConfigurationUpdate(editorConfiguration: PartialConfig): Promise<void>;
    load(): Promise<Config>;
    static isConfigFile(this: void, uri: string): boolean;
    static merge(base: Config, ...overrides: any[]): Config;
}
export {};
//# sourceMappingURL=Config.d.ts.map