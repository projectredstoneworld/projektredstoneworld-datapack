import type { Externals, FsLocation } from '../common/index.js';
import { Uri } from '../common/index.js';
export type RootUriString = `${string}/`;
export type FileExtension = `.${string}`;
export declare namespace fileUtil {
    /**
     * Get the relative URI of `target` based from `base`.
     *
     * @returns The relative URI, or `undefined` if `target` is not under `base`.
     */
    function getRelativeUriFromBase(target: string, base: string): string | undefined;
    function isSubUriOf(uri: string, base: string): boolean;
    /**
     * @param rootUris The root URIs. Each URI in this array must end with a slash (`/`).
     * @param uri The target file URI.
     * @returns The relative path from one of the `roots` to the `uri`, or `undefined` if the `uri` is not under any roots.
     * The separation used in the relative path is always slash (`/`).
     * @example
     * getRels(['file:///root/foo/', 'file:///root/'], 'file:///root/foo/bar/qux.json')
     * // -> 'bar/qux.json'
     * // -> 'foo/bar/qux.json'
     * // -> undefined
     *
     * getRels(['file:///root/foo/', 'file:///root/'], 'file:///outsider.json')
     * // -> undefined
     */
    function getRels(uri: string, rootUris: readonly RootUriString[]): Generator<string, undefined, unknown>;
    /**
     * @see {@link getRels}
     * @example
     * getRel(['file:///root/foo/', 'file:///root/'], 'file:///root/foo/bar/qux.json') // -> 'bar/qux.json'
     * getRel(['file:///root/foo/', 'file:///root/'], 'file:///outsider.json') // -> undefined
     */
    function getRel(uri: string, rootUris: readonly RootUriString[]): string | undefined;
    function getRoots(uri: string, rootUris: readonly RootUriString[]): Generator<RootUriString, undefined, unknown>;
    function getRoot(uri: string, rootUris: readonly RootUriString[]): string | undefined;
    function isRootUri(uri: string): uri is RootUriString;
    function ensureEndingSlash(uri: string): RootUriString;
    function trimEndingSlash(uri: string): string;
    function join(fromUri: string, toUri: string): string;
    function isFileUri(uri: string): boolean;
    /**
     * @returns The part from the last `.` to the end of the URI, or `undefined` if no dots exist. No special treatment for leading dots.
     */
    function extname(value: string): FileExtension | undefined;
    /**
     * @returns The part from the last `/` to the end of the URI.
     */
    function basename(uri: string): string;
    /**
     * @returns The part from the beginning of the URI to the last `/`.
     */
    function dirname(uri: string): string;
    function getParentOfUri(uri: FsLocation): Uri;
    /**
     * @throws
     *
     * @param mode Default to `0o777` (`rwxrwxrwx`)
     */
    function ensureDir(externals: Externals, path: FsLocation, mode?: number): Promise<void>;
    /**
     * @throws
     *
     * Ensures the parent directory of the path exists.
     *
     * @param mode Default to `0o777` (`rwxrwxrwx`)
     */
    function ensureParentOfFile(externals: Externals, path: FsLocation, mode?: number): Promise<void>;
    function chmod(externals: Externals, path: FsLocation, mode: number): Promise<void>;
    function ensureWritable(externals: Externals, path: FsLocation): Promise<void>;
    /**
     * @returns An array of file URI strings.
     */
    function getAllFiles(externals: Externals, root: FsLocation, depth?: number): Promise<string[]>;
    function markReadOnly(externals: Externals, path: FsLocation): Promise<void>;
    function unlink(externals: Externals, path: FsLocation): Promise<void>;
    function readFile(externals: Externals, path: FsLocation): Promise<Uint8Array<ArrayBuffer>>;
    /**
     * @throws
     *
     * The directory of the file will be created recursively if it doesn't exist.
     *
     * The target file will be given permission `0o666` (`rw-rw-rw-`) before being written into, and changed back to the
     * specified `mode`.
     *
     * * Encoding: `utf-8`
     * * Mode: `0o666` (`rw-rw-rw-`)
     * * Flag: `w`
     */
    function writeFile(externals: Externals, path: FsLocation, data: Uint8Array<ArrayBuffer> | string, mode?: number): Promise<void>;
    /**
     * @throws
     */
    function readJson(externals: Externals, path: FsLocation): Promise<unknown>;
    /**
     * @throws
     *
     * @see {@link writeFile}
     */
    function writeJson(externals: Externals, path: FsLocation, data: any): Promise<void>;
    /**
     * @throws
     */
    function readGzippedFile(externals: Externals, path: FsLocation): Promise<Uint8Array<ArrayBuffer>>;
    /**
     * @throws
     */
    function writeGzippedFile(externals: Externals, path: FsLocation, buffer: Uint8Array<ArrayBuffer> | string): Promise<void>;
    /**
     * @throws
     */
    function readGzippedJson(externals: Externals, path: FsLocation): Promise<unknown>;
    /**
     * @throws
     */
    function writeGzippedJson(externals: Externals, path: FsLocation, data: any): Promise<void>;
}
//# sourceMappingURL=fileUtil.d.ts.map