import * as core from '@spyglassmc/core';
import EventEmitter from 'events';
import * as ls from 'vscode-languageserver/node.js';
type Predicate = (uri: string) => boolean;
export interface LspFileWatcherOptions {
    capabilities: ls.ClientCapabilities;
    connection: ls.Connection;
    externals: core.Externals;
    locations: readonly core.FsLocation[];
    logger: core.Logger;
    predicate: Predicate;
}
/**
 * A file watcher based on Language Server Protocol's `workspace/didChangeWatchedFiles`
 * notification.
 */
export declare class LspFileWatcher extends EventEmitter implements core.FileWatcher {
    #private;
    get watchedFiles(): core.UriStore;
    constructor({ capabilities, connection, externals, locations, logger, predicate }: LspFileWatcherOptions);
    ready(): Promise<void>;
    close(): Promise<void>;
    /**
     * Reconcile the internal URI store with the actual directories and files on the disk.
     * @param uri URI that should be reconciled. If it's a file URI, ensure the file exists in the
     * internal URI store; if it's a directory URI, ensure all contents of it exists and no extra
     * content is recorded; if the URI does not exist, reconcile its parent URI up until the watched
     * `locations`.
     */
    reconcile(uri: core.FsLocation): Promise<void>;
}
export {};
//# sourceMappingURL=LspFileWatcher.d.ts.map